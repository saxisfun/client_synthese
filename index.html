<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test WCF</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <script type="application/javascript" src="Scripts/ScriptsDivers.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
</head>
<body>
    <div data-role="page" id="menu">
        <div id="" data-role="header">
            <h1>Test WCF</h1>
            <!--<button onclick="bienvenue();" id="leftnav">
                Précédent
            </button>-->
        </div>

        <div data-role="content">
            <div>
                <div>
                    <button onclick="LogAdmin();">
                        Connexion administrateur
                    </button>
                    <button onclick="GetUsager();">
                        Obtenir usager 
                    </button>
                    <button onclick="InsertUsager();">
                        Insérer usager()
                    </button>
                    <button onclick="LogoutAdmin();">
                        Deconnexion adminstrateur();
                    </button>
                </div>
                <!--<div>
                    <button onclick="listeCartes();">
                        Consulter
                    </button>
                </div>-->



            </div>
        </div>
        <div data-role="footer">

        </div>

    </div>
<<<<<<< HEAD

	
    <div class="screen hidden" id="liste_observation1">
        <h2>Liste des observations</h2>
        <p>bla bla bla.</p>
    </div> 



	<!---------------------------------------------------------------->
	<!--/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\-->
	<!--  Écran recherche de commentaire -->

	<div id="ecran_dun_commentaire" class="screen hidden" style="text-align:center;" >


		<table  class="table2">
		<col style="width:100%;">        
		<tr> 
			
			<td> 
	    		<ul class="buttons">
					<li>
		   	 			<a href="#" id="" 
						onclick="
						SendUnCommentaire(); 

						
						" class="switch_screen">Cliquez ici pour sauvegarder </a>
					</li>					
	    		</ul>
	    	</td> 
		</tr>				
		
		<tr>
			<td style="text-align:left;"> <h3>Ajouter un commentaire</h3></td>
		</tr>		
		<tr>
			<td class="tdhead" style="text-align:left;"><p id="id_comm_timestamp_label">Timestamp:</p></td>	
		</tr>
		<tr>
			<td class="tddata"><input type="text" id="id_comm_timestamp_data" ></td> 
		</tr>		
	
		<tr>
			<td class="tdhead" style="text-align:left;"><p id="id_comm_observ_id_label">Observation:</p></td>	
		</tr>
		<tr>
			<td class="tddata"><input type="text" id="id_comm_observ_id_data"  ></td> 
		</tr>		
	
		<tr>
			<td style="text-align:left;"><p id="id_comme_usager_label">Usager:</p></td>	
		</tr>
		<tr>
			<td><input type="text" id="id_comm_usager_data"  ></td> 
		</tr>

		<tr>
			<td style="text-align:left;"><p id="id_comme_resume_label">Commentaire:</p></td>
		</tr>		
		<tr>
			<td>
				<textarea rows="20"  style="width:100%;" id="id_comm_resume_data" placeholder="Écrivez votre commentaire" ></textarea> 		
			</td> 
		</tr>			
	
		

		</table>	
    </div> 
 


	<!---------------------------------------------------------------->
	<!--/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\-->
	<!--  Écran recherche dans le dictionnaire -->
 
	 <div id="ecran_recherche" class="screen hidden" style="text-align:center;" >

		<table>
		<col style="width:40%;">        
		<col style="width:60%;">		

		<tr>
			<td><img style="width:60px;"src="img/dictionary.png"/></td>		
			<td> <h3> Rechercher dans le dictionnaire </h3></td>
		</tr>


		<tr>
			<td><h4>Specimen:</h4></td>
			<td><input type="text" id="id_recherher_dict" placeholder="Écrivez une partie du nom de l'oiseau" autofocus></td> 
		</tr>

		
		<tr> 
			<td> 
			<p id="resultat"></p>
			</td>
			<td> 
	    		<ul class="buttons" >
					<li>
		   	 			<a href="#" id="load" class="switch_screen">Charger le dictionnaire</a>
					</li>	
	    		</ul>
	    	</td> 
		</tr>
	
	
	
	
	
		
		</table>	
	</div> 
 








	<!---------------------------------------------------------------->
	<!--/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\-->
	<!--  Écran de test géolocalisation -->  
 	<div id="ecran_geolocalisation" class="screen hidden" style="text-align:center;" >
		<table>
		<tr> 
			<td> 
				<ul class="buttons">
					<li>
						<a href="#" id="" onclick="localiser('carte');" 						class="switch_screen">localiser('carte')</a>
					</li>	
					
					<li>	
						<a href="#" id="" onclick="localiser();" 						class="switch_screen">localiser()</a>
					</li>	
				</ul>
			</td> 
		</tr>


		</table>	

		<div>
			<!-- <button onclick="localiser();">localise()</button>  -->
			<div id="contentMap"></div>
		</div>

	</div> 




    <!---------------------------------------------------------------->
    <!--/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\-->
    <!--  Écran avis par courriel  -->	
 	<div id="ecran_notification" style="text-align:center;" >
	
	
 	<table class="table2">
 	<col style="width:100%;">        
 	<tr>
 		<td>		
 			 <h3>Avis par courriel</h3>	
 		</td> 
 	</tr>	

	
 	<!-- Bouton de sauvegarde  -->
	
 	<tr> 
		
 		<td> 
     		<ul class="buttons">
 				<li>
 	   	 			<a href="#" id="btnSauverCompte" 
 					onclick="alert('DÉSOLÉ\nvous avez un virus...');" class="switch_screen">Cliquez ici pour sauvegarder </a>
 				</li>					
     		</ul>
     	</td> 
 	</tr>				
	

 	<!-- Adresse de courriel  -->
	
	
 	<tr>
 		<td class="tdhead" style="text-align:left;"><p id="id_Email_label" >Adresse de courriel:</p></td> 
 	</tr>
 	<tr>
 		<td class="tddata"><input  type="text" style="" id="id_Email_data" VALUE=""></td> 
 	</tr>			
	
	
 	<!-- flag pour reçevoir des couriels  -->
	
	
 	<tr>
 		<td class="tdhead" style="text-align:left;"><p id="id_Notifier_label" >Recevoir des avis par courriel:</p></td> 
 	</tr>
	
 	<tr>
 		<td style="text-align:right;">
	
 			<SELECT class="SELECTBLUE" 
 			onMouseWheel="return false;"
 			onchange="" style="width:250px;" name="XX1">
 			<OPTION selected VALUE="XX1A">Je ne veux pas recevoir de courriel</OPTION>
 			<OPTION VALUE="XX1B">Je veux être avisé pour toutes onbservations</OPTION>
 			<OPTION VALUE="XX1C">Je veux être avisé seulement pour mes oiseaux sélectionnés</OPTION>		
					
 			</SELECT>	
	
 		</td> 		
 	</tr>			
	
	

 	<!-- périmètre en km  -->
	
	
 	<tr>
 		<td class="tdhead" style="text-align:left;"><p id="id_Notifier_label" >Je veux être informé pour les observation qui sont:</p></td> 
 	</tr>
	
 	<tr>
 		<td style="text-align:right;">
	
 			<SELECT class="SELECTBLUE" 
 			onMouseWheel="return false;"
 			onchange="" style="width:250px;" name="XX2">
 			<OPTION selected VALUE="XX2A">Je ne veux pas recevoir de courriel</OPTION>
 			<OPTION VALUE="XX2B">Dans un périmètre de 5km de ma position</OPTION>
 			<OPTION VALUE="XX2C">Peu importe la distance</OPTION>		
					
 			</SELECT>	
	
 		</td> 		
 	</tr>			
		
	
					
 	</table>
		
 	</div> 





    <!---------------------------------------------------------------->
    <!--/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\-->
    <!--  Écran Paramètres  -->	
 	<div id="ecran_Parametres" style="text-align:center;" >
 	<table>

   <!--		
 	 <div id="tstImage">  
 		<h3>Paramètres:</h3>
 		  <div id="ecran_Parametres_C1"> 
 		    <p>txt1</p>
 		    <p>txt2</p>
 		  </div> 
 		  <div id="ecran_Parametres_C2"> 
 		    <p>txt3</p>
 		  </div> 
  	</div>  
    -->


<div id="searcharea">
	<label for="search">Chercheur d'oiseau</label>
	<p>Recherche dans la liste des oiseaux de la société</p>
	<input type="search" name="search" id="search" placeholder="Donnez une partie du nom ou sa description" />
</div>

<div id="update"></div>

 	</table>	
 	</div> 



	<!---------------------------------------------------------------->
	<!--/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\-->
	<!--  Écran settings         <table class="table2" >    -->	  	 

	<div id="ecran_settings" class="screen hidden" style="text-align:center;" >
	<h2>Settings</h2>
    <table>  
	 
		<col style="width:30%;">        
		<col style="width:70%;">		
	 		
	<tr>
		<td> 
		<h3 style="text-align:right;">Vos données locales:</h3>
		</td> 
		
		<td  style="text-align:left;">
		<button onclick="effacer_local_storage();" style="width:170px;">Effacer le Local Storage</button>
			
		
		</td> 
	</tr>	

	<tr>
		<td> </td> 
		<td> 
			<h4 id="id_msg_localstorageeffacer" style="text-align:left;color: red;"></h4>
		</td> 
	</tr>
	
	<!-- Accélération -->	
	<tr>
		<td> 
		<h3 style="text-align:right;">Accélération:</h3>
		</td> 
	
	
		<td  id="id_accel_data" style="text-align:left;"></td> 	
	</tr>	
	
	
	<!-- Géolocalisation -->		
	<tr>
		<td> 
		<h3 style="text-align:right;">Géolocalisation:</h3>
		</td> 
	
		<td  id="id_geolocalisation" style="text-align:left;"></td> 	
	</tr>	

	<!-- Navigateur -->		
	<tr>
		<td> 
		<h3 style="text-align:right;">Navigateur:</h3>
		</td> 
	
		<td  id="id_navUserAgent" style="text-align:left;"></td> 	
	</tr>	

	<!-- Langue des menus (pour l'instant...) -->		
	<tr>
		<td> 
		<h3 style="text-align:right;">Langue:</h3>
		</td> 

		<td  id="id_language" style="text-align:left;"></td> 	
	</tr>	
	
	<!-- Connexion -->		
	<tr>
		<td> 
		<h3 style="text-align:right;">Connexion réseau:</h3>
		</td> 

		<td  id="id_online_offline" style="text-align:left;"></td> 	
	</tr>	
	
   <!-- Recharger -->	
	<tr>
		<td> 
		<h3 style="text-align:right;">Application:</h3>
		</td> 
		
		<td  style="text-align:left;">
		<button onclick="location.reload(true);" style="width:170px;">Recharger la page</button>
			
		
		</td> 
	</tr>		
	</table>	 
	</div>
	
	 
</div> 
	
	
	
	
	
  	<div style="" >
		<textarea rows="20"  style="width:100%;" id="id_textarea_01"></textarea> 
	</div>	
	  
		 
	   
  
 	<script type="text/javascript" src="js/Mz.js"></script> 
	<script type="text/javascript" src="js/helper.js"></script>
	<script type="text/javascript" src="js/main.js"></script>  
	<script type="text/javascript" src="js/all.js"></script>
	
	
	<script type="text/javascript" src="js/agListViewObserv.js"></script>	
	<script type="text/javascript" src="js/agListViewComm.js"></script>	
	<script type="text/javascript" src="js/agTakePic.js"></script>		
	<script type="text/javascript" src="js/agAccel.js"></script>	
	<script type="text/javascript" src="js/agUpload.js"></script>	
	<script type="text/javascript" src="js/agOnOffLine.js"></script>		
	<script type="text/javascript" src="js/agPhoto.js"></script>	
	<script type="text/javascript" src="js/agUneObserv.js"></script>
	<script type="text/javascript" src="js/agULListViewPhotos.js"></script>	

	
	<script type="text/javascript" src="js/ddTest.js"></script>
	<script type="text/javascript" src="js/ddListViewDict.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true" ></script>
	
	
	
	
<script type="text/javascript" >
document.getElementById("id_comm_resume_data").value = "";
document.getElementById("id_textarea_01").value = "";


//dataAdapder
var dataAdapterSwitch_dataFromIIS = false;
var varGlobal_UserConnected = "0";



// mise à jour de l'écran settings
//choix de la langue pour les boutons du menu
if (navigator.language===undefined)
  {
	  if (navigator.userLanguage===undefined)
	    {
	    userLang = 'en';
	    }
	  else
	    {
	    userLang = navigator.userLanguage.toLowerCase().substr(0,2);
	    }
  }
else
  {
  	userLang = navigator.language.toLowerCase().substr(0,2);
  }
switch(userLang){
	case "fr":
	  document.getElementById('id_language').innerHTML="Français";
	  break;
	case "en":
  	  document.getElementById('id_language').innerHTML="English";
  	  break;
	default:
	   document.getElementById('id_language').innerHTML="Other: "+userLang;
}
agXMLHttpReqLan('json/langue_' + userLang + '.json');




document.getElementById('id_navUserAgent').innerHTML=navigator.userAgent;
if ("geolocation" in navigator) {  
	document.getElementById('id_geolocalisation').innerHTML="Géolocalisation disponible";
} else 
{  
	document.getElementById('id_geolocalisation').innerHTML="Pas de géolocalisation avec ce navigateur";
}



//showLogin();
//-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_
//Initialiser objets
objListViewComm = new ClasseListViewComm("ListViewComm 1");
objListViewObservations = new ClasseListViewObservations("Observation 1");

//objListViewDictionnaires = new ClasseListViewDictionnaire("Dictionnaire 1");



objListViewObservations.fillMyListViewObservArrayFromLocalStorage();

laCamera1 = new MaCamera('Cam 1');
laCamera1.activateAudio();

afficher_les_observations_new(1,20);


leAccel1 = new MonAccel();
leAccel1.capture_acceleration2();

//-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_
// 
var varGlobal1;
var varGlobal2;
var varGlobalNomImage;




/*
var la_reponse="";

document.getElementById("id_redirectionMessage").innerHTML=la_reponse;

//pour recevoir les données du barcode scanner
var first = getUrlVars()["code"];
var second = getUrlVars()["barcodeReturnedCode1"];

*/


/*
document.getElementById("img-tag-show-picture").onclick = function() {
	alert("img-tag-show-picture:"+EXIF.pretty(this));	
	alert("I was taken by a " + EXIF.getTag(this, "Orientation") + " " + EXIF.getTag(this, "Model"));
}

*/







function afficherJsonDansTextarea()
{
	
	document.getElementById("id_textarea_01").value = "";
	//afficher je json d'obs dans le textarea
	var myListViewObservArray_strignified = JSON.stringify(objListViewObservations.myListViewObservArray, null, "\t"); 
	
		  
	//myListViewObservArray_strignified2 = myListViewObservArray_strignified.replace('strObserv_', '777');
	var myListViewObservArray_strignified2 = myListViewObservArray_strignified.replace(/strObserv_/g, "")
	var myListViewObservArray_strignified3 = myListViewObservArray_strignified2.replace(/strPhoto_/g, "")
	
	
	//ici oui
	//document.getElementById("id_textarea_01").value = myListViewObservArray_strignified3;  

}






function creer_json_des_nouvelles_observations(){
	//créer variable json des nouveux observations à envoyer et ceux modifiées
    //var myArrayDObservationDansLocalStorage = JSON.parse(localStorage.getItem("lsListViewObservArray"));
	var myArrayDObservationDansLocalStorage = objListViewObservations.myListViewObservArray;
	
	var myArrayDObservationAUploader = [];


	if ((typeof myArrayDObservationDansLocalStorage == "undefined" ) || (myArrayDObservationDansLocalStorage == null) || (myArrayDObservationDansLocalStorage == "undefined")){
		//alert("myArrayDObservationDansLocalStorage = undefined");	
		
		
	}else{	
		//alert("myArrayDObservationDansLocalStorage.length: "+myArrayDObservationDansLocalStorage.length);
	
		for (var i=0; i < myArrayDObservationDansLocalStorage.length; i++){
			var observ_Object = myArrayDObservationDansLocalStorage[i];
			//observ_Object.strObservFlagInsertUpdate = "";
			//alert("strObservFlagInsertUpdate:"+observ_Object.strObservFlagInsertUpdate);
			
			
			if(observ_Object.strObservFlagInsertUpdate=="I" || observ_Object.strObservFlagInsertUpdate=="U"){
			
				myArrayDObservationAUploader.push(observ_Object);	
				
				//alert("Ok un nouveau");
				
			}
		} 
		
		//var e3e3e3rr443r = JSON.stringify(myArrayDObservationAUploader); 
		var e3e3e3rr443r = JSON.stringify(myArrayDObservationAUploader, null, "\t");	
		document.getElementById("id_textarea_01").value = "";

		
		
		//ici oui
		//document.getElementById("id_textarea_01").value = e3e3e3rr443r;  

		//alert(e3e3e3rr443r);
	}
	
	return myArrayDObservationAUploader;
}




function envoyer_json_des_nouvelles_observations_au_serveur(le_myArrayDObservationAUploader)
{
	
	xmlhttp = new XMLHttpRequest();
	xmlhttp.open("POST","http://198.100.145.177/cegep/obs_up.php",true);
	
	
	xmlhttp.setRequestHeader("Content-Type", "application/json");
	
	//alert(JSON.stringify(le_myArrayDObservationAUploader));
	
		
	xmlhttp.onreadystatechange = function(){
		if (xmlhttp.readyState == 4) {
			if (xmlhttp.status == 200 || xmlhttp.status == 0) {
			
				var str_output = xmlhttp.responseText;
				
					//storageDate.date1 = todaysDate;
					//alert("str_output: "+str_output+"\n\n\n\n");
					//storageObs = str_output;

					//document.getElementById("id_textarea_01").value = document.getElementById("id_textarea_01").value +"\n\n"+ str_output;				
					document.getElementById("id_textarea_01").value = str_output;

			}
		}
	}	
	
	
	
	//document.getElementById("id_textarea_01").value = JSON.stringify(le_myArrayDObservationAUploader, null, "\t");	
	//alert("1234567:"+JSON.stringify(le_myArrayDObservationAUploader, null, "\t"));
	
	
	xmlhttp.send(JSON.stringify(le_myArrayDObservationAUploader)); 

			
			
			
}





function afficher_les_observations_new(observation_de, observation_a)
{
	hide_all();
	
	
	objListViewObservations.fillObservsListView();


	
	document.getElementById("tool_button_ajouter_comm").style.visibility="hidden";
	
	document.getElementById("tool_button_ajouter_observ").style.visibility="visible";
	document.getElementById("tool_button_rechercher").style.visibility="visible";
	document.getElementById("tool_button_seconnecter").style.visibility="visible";
	
	
	
	
	show_back_button();

}	




function onClickButtonSynchro()
{

	var myArray_DObs = [];
	myArray_DObs = creer_json_des_nouvelles_observations();

	envoyer_json_des_nouvelles_observations_au_serveur(myArray_DObs);

	objListViewObservations.downloader_les_observations_dans_localstorage(1, 20);
		
	//callback_de_downloader_les_observations_dans_localstorage


}

function callback_de_downloader_les_observations_dans_localstorage()
{
	objListViewObservations.clearMyListViewObservArray();
	
	
	objListViewObservations.removeAllObservFromListView();
	
	objListViewObservations.fillMyListViewObservArrayFromLocalStorage();

	

	
	afficher_les_observations_new(1,20);
}	














function utf8_to_b64( str ) {
    return window.btoa(unescape(encodeURIComponent( str )));
}

function b64_to_utf8( str ) {
    return decodeURIComponent(escape(window.atob( str )));
}

// Usage:
//utf8_to_b64('✓ à la mode'); // "4pyTIMOgIGxhIG1vZGU="
//b64_to_utf8('4pyTIMOgIGxhIG1vZGU='); // "✓ à la mode"



</script>


<script type="text/javascript">
 
/*
$(document).ready(function(){
	alert('ok jq');
	console.log('ok jq');
});
*/
 
</script>


  
=======
>>>>>>> d7c60aeaa62e5e5ccb29bcee2f9978dfa4648f71
</body>
</html>
